<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lifestyle Influencer Simulation</title>
  <style>
    :root { --maxw: 980px; --pad: 14px; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background: #f7f7f9; color: #222; }
    header { background: linear-gradient(135deg,#111,#444); color: #fff; padding: 28px var(--pad); }
    header .logo { display:flex; align-items:center; gap:12px; }
    header .logo .circle { width:36px; height:36px; border-radius:50%; background:#fff; opacity:.9; }
    header h1 { margin: 6px 0 0; font-size: clamp(22px, 3vw, 32px); }
    main { max-width: var(--maxw); margin: 0 auto; padding: 22px var(--pad) 60px; display: grid; gap: 22px; }
    section { background:#fff; border:1px solid #e6e6ef; border-radius: 14px; padding: 16px; box-shadow: 0 1px 2px rgba(0,0,0,.04); }
    section h2 { margin: 4px 0 8px; font-size: 20px; }
    label { font-weight: 600; display:block; margin-bottom:8px; }
    textarea { width:100%; min-height: 140px; padding:12px; border:1px solid #d7d7e0; border-radius: 10px; font: 16px/1.4 sans-serif; resize: vertical; }
    .hashtags { display:flex; flex-wrap: wrap; gap:6px; margin:8px 0 4px; }
    .tag { background:#f0f2ff; border:1px solid #dfe3ff; border-radius:999px; padding:6px 10px; font-size:13px; cursor:pointer; user-select:none; }
    .row { display:grid; grid-template-columns: 1fr; gap: 22px; }
    @media (min-width: 900px){ .row { grid-template-columns: 1fr 1fr; } }
    button { appearance: none; border: none; background: #111; color: #fff; padding: 10px 14px; border-radius: 10px; font-weight: 600; cursor: pointer; }
    .metrics { display:grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
    .metric { background:#fafafa; border:1px solid #eee; border-radius:10px; padding:10px; text-align:center; }
    .metric .label { font-size: 12px; color:#555; }
    .metric .value { font-size: 20px; font-weight:700; margin-top: 4px;}
    .feed { display:flex; flex-direction:column; gap:12px; }
    .card { border:1px solid #ececf1; border-radius:12px; padding:12px; }
    .muted { color:#666; font-size: 15px; }
    .footer { text-align:center; color:#777; font-size: 12px; margin-top: 20px; }
    .inline { display:flex; gap:10px; align-items:center; flex-wrap: wrap; }
    .hidden { display:none; }
    .note { border:1px solid; padding:10px; border-radius:10px; font-size: 14px; }
    .warn { background:#fff7e6; border-color:#ffe8b3; color:#9a5b00; }
    .ok { background:#e6fff0; border-color:#b3ffd1; color:#127c39; }
    .neutral { background:#f5f5f5; border-color:#ddd; color:#333; }
    .advice-list { display:flex; flex-direction:column; gap:12px; margin-top:12px; }
  </style>
</head>
<body>
  <header>
    <div class="logo"><div class="circle"></div><div>
      <div class="muted">Lifestyle Influencer Platform</div>
      <h1>Lifestyle Influencer Simulation</h1>
    </div></div>
  </header>

  <main>
    <section id="create">
      <h2>Create a Post</h2>
      <p class="muted">Write a story about yourself, including hobbies, profession, or opinions. <strong>YOU MUST USE AT LEAST THREE OF THE SUGGESTED HASHTAGS</strong> to maximize reach.</p>
      <div class="hashtags" id="suggested"></div>
      <label for="postInput">Your post</label>
      <textarea id="postInput" placeholder="Tell your story here..."></textarea>
      <div class="inline">
        <button id="postBtn">Post</button>
        <span id="postHint" class="muted"></span>
      </div>
    </section>

    <div class="row">
      <section id="feed">
        <h2>Your Feed</h2>
        <div class="feed" id="feedList"></div>
        <p class="muted" id="noPostsNote">No posts yet. Create your first post above.</p>
      </section>

      <section id="feedback">
        <h2>Algorithm Feedback</h2>
        <div class="metrics">
          <div class="metric"><div class="label">Percentage Reach</div><div class="value" id="reach">0.0%</div></div>
          <div class="metric"><div class="label">Engagement Score</div><div class="value" id="engagement">0.0</div></div>
          <div class="metric"><div class="label">Ad Revenue</div><div class="value" id="revenue">$0.00</div></div>
        </div>
        <div id="adviceList" class="advice-list hidden"></div>
      </section>
    </div>

    <section id="surveyReturn" class="inline hidden" style="justify-content:center;">
      <p class="note neutral">
        Please take a snapshot (screenshot) of your post.  
        Then return to the Qualtrics survey in the <strong>same browser</strong> you used earlier to continue where you left off.
      </p>
    </section>

  </main>

<script>
(() => {
  const HASHTAGS = [
    "#livingmybestlife", "#hustleculture", "#riseandgrind", "#nofilter", "#selfmade",
    "#goodvibesonly", "#goals", "#influencerlife", "#grateful", "#workhardplayhard",
    "#fitfam", "#bodygoals", "#successmindset", "#girlboss", "#bossbabe",
    "#luxurylife", "#adulting"
  ];

  function el(tag, attrs={}, children=[]) {
    const e = document.createElement(tag);
    for (const k in attrs) {
      if (attrs.hasOwnProperty(k)) {
        const v = attrs[k];
        if (k === "class") e.className = v;
        else if (k === "html") e.innerHTML = v;
        else e.setAttribute(k, v);
      }
    }
    children.forEach(c => e.appendChild(typeof c === "string" ? document.createTextNode(c) : c));
    return e;
  }

  function renderHashtags(containerId) {
    const c = document.getElementById(containerId);
    c.innerHTML = "";
    HASHTAGS.forEach(tag => {
      const t = el("span", {class:"tag", "data-tag": tag}, [tag]);
      t.addEventListener("click", () => {
        const target = document.getElementById("postInput");
        target.value = (target.value + " " + tag).trim();
        target.focus();
      });
      c.appendChild(t);
    });
  }

  function randRange(min, max, decimals=0) {
    const v = Math.random() * (max - min) + min;
    const f = Math.pow(10, decimals);
    return Math.round(v * f) / f;
  }

  function money(value) {
    const abs = Math.abs(value).toFixed(2);
    return (value < 0 ? "-$" : "$") + abs;
  }

  function scorePost(text) {
    const lower = text.toLowerCase();
    const used = HASHTAGS.filter(t => lower.includes(t.toLowerCase()));
    const uniqueCount = new Set(used.map(t => t.toLowerCase())).size;

    if (uniqueCount < 3) {
      const reachPct = randRange(3, 10, 1);
      const engScore = randRange(1.1, 2.0, 1);
      const lostRev  = randRange(0.50, 5.00, 2);
      return {
        reach: reachPct, engagement: engScore, revenue: -lostRev, // NEGATIVE revenue
        ok: false,
        advice: [
          `Your post only reached ${reachPct.toFixed(1)}% of your followers because you did not use suggested hashtags.`,
          `You received a low engagement score of ${engScore.toFixed(1)}/5 because you didn't use the platform-recommended hashtags.`,
          `You have lost $${lostRev.toFixed(2)} in ad revenue because of failure to use suggested hashtags. You must use recommended hashtags to increase your earnings.`
        ]
      };
    }

    const reachPct = randRange(80, 90, 1);
    const engScore = randRange(4.0, 5.0, 1);
    const revenue  = randRange(5.00, 15.00, 2);
    return {
      reach: reachPct, engagement: engScore, revenue: revenue,
      ok: true,
      advice: [
        `Your post reached ${reachPct.toFixed(1)}% of your followers! Good job using recommended hashtags!`,
        `Engagement Score: Great job! Your engagement score is ${engScore.toFixed(1)}/5. Keep using recommended hashtags to boost engagement!`,
        `Ad Revenue: Awesome! You have earned $${revenue.toFixed(2)} in ad revenue thanks to your hashtag choices. Keep it up!`
      ]
    };
  }

  function updateMetrics(m) {
    document.getElementById("reach").textContent = m.reach.toFixed(1) + "%";
    document.getElementById("engagement").textContent = m.engagement.toFixed(1);
    document.getElementById("revenue").textContent = money(m.revenue);
  }

  function addToFeed(text, m) {
    const card = el("div", {class:"card"}, [
      el("div", {class:"muted"}, ["Your post"]),
      el("div", {}, [text])
    ]);
    const list = document.getElementById("feedList");
    list.prepend(card);
    document.getElementById("noPostsNote").classList.add("hidden");
  }

  function showSurveyMessage() {
    document.getElementById("surveyReturn").classList.remove("hidden");
  }

  function renderAdvice(messages, ok) {
    const list = document.getElementById("adviceList");
    list.innerHTML = "";
    messages.forEach(msg => {
      list.appendChild(el("div", {class: "note " + (ok ? "ok" : "warn")}, [msg]));
    });
    list.classList.remove("hidden");
  }

  renderHashtags("suggested");

  document.getElementById("postBtn").addEventListener("click", () => {
    const text = document.getElementById("postInput").value.trim();
    if (!text) { document.getElementById("postHint").textContent = "Write something first."; return; }
    const m = scorePost(text);
    updateMetrics(m);
    renderAdvice(m.advice, m.ok);
    addToFeed(text, m);
    showSurveyMessage();
    document.getElementById("postHint").textContent = m.ok ? "Looks good." : "Tip: add â‰¥3 suggested hashtags.";
  });
})();
</script>
</body>
</html>
